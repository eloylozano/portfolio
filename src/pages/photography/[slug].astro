---
import Layout from "../../layouts/Layout.astro";
import PhotoProjectPage from "../../components/PhotoProjectPage.astro";
import photoProjects from "../../data/photoProjects.js";

export async function getStaticPaths() {
  return photoProjects.map((project) => ({
    params: { slug: project.slug },
  }));
}

const { slug } = Astro.params;

const project = photoProjects.find((p) => p.slug === slug);

if (!project) {
  throw new Error(`No se encontró el proyecto para el slug: ${slug}`);
}

const featuredGalleries = ["me", "motor", "Architecture"];

const noindex = !featuredGalleries.includes(slug);
---

<Layout
  noindex={noindex}
  title={`${project.title} | Fotografía – Eloy Lozano`}
  description={project.description}
>
  <PhotoProjectPage {...project} />
</Layout>
