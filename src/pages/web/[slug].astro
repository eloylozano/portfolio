---
import Layout from "../../layouts/Layout.astro";
import WebProjectPage from "../../components/WebProjectPage.astro";
import { webProjects } from "../../data/webProjects";

export async function getStaticPaths() {
  return webProjects.map((webProject) => ({
    params: { slug: webProject.slug },
  }));
}

const { slug } = Astro.params;
const webProject = webProjects.find((p) => p.slug === slug);

if (!webProject) {
  throw new Error(`No se encontró el proyecto para el slug: ${slug}`);
}

// Decide aquí
const featuredProjects = ["saviaclub", "gastronomia", "pawtopia", "atelier", "axesteel"];
const noindex = !featuredProjects.includes(slug);
---


<Layout
  noindex={noindex}
  title={`${webProject.title} | Proyecto Web – Eloy Lozano`}
  description={webProject.description}
>
  <WebProjectPage {...webProject} />
</Layout>
