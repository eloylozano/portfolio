---
import Title from "./Title.astro";
const projects = [
  {
    title: "Appfluence",
    category: "app",
    img: "/images/projects/app_appfluence.jpg",
    projectLink: "#",
    demoLink: "#",
    gitLink: "#",
  },
  {
    title: "Bitten Apol",
    category: "app",
    img: "/images/projects/app_bitten-apol.jpg",
    projectLink: "#",
    demoLink: "#",
    gitLink: "#",
  },
  {
    title: "Deskify",
    category: "app",
    img: "/images/projects/app_deskify.jpg",
    projectLink: "#",
    demoLink: "#",
    gitLink: "#",
  },
  {
    title: "Playa",
    category: "photo",
    img: "/images/projects/photo_beach.jpg",
    projectLink: "#",
    demoLink: "#",
    gitLink: "#",
  },
  {
    title: "Cañón",
    category: "photo",
    img: "/images/projects/photo_canyon.jpg",
    projectLink: "#",
    demoLink: "#",
    gitLink: "#",
  },
  {
    title: "Ciudad de la Cultura",
    category: "photo",
    img: "/images/projects/photo_CiudadCultura.jpg",
    projectLink: "#",
    demoLink: "#",
    gitLink: "#",
  },
  {
    title: "Al filo del Atlántico",
    category: "photo",
    img: "/images/projects/photo_cliff.jpg",
    projectLink: "#",
    demoLink: "#",
    gitLink: "#",
  },
  {
    title: "Escuela",
    category: "photo",
    img: "/images/projects/photo_escuela.jpg",
    projectLink: "#",
    demoLink: "#",
    gitLink: "#",
  },
  {
    title: "Bosque",
    category: "photo",
    img: "/images/projects/photo_forest.jpg",
    projectLink: "#",
    demoLink: "#",
    gitLink: "#",
  },
  {
    title: "Moto",
    category: "photo",
    img: "/images/projects/photo_moto.jpg",
    projectLink: "#",
    demoLink: "#",
    gitLink: "#",
  },
  {
    title: "Avión",
    category: "photo",
    img: "/images/projects/photo_plane.jpg",
    projectLink: "#",
    demoLink: "#",
    gitLink: "#",
  },
  {
    title: "Atardecer",
    category: "photo",
    img: "/images/projects/photo_sunset.jpg",
    projectLink: "#",
    demoLink: "#",
    gitLink: "#",
  },
  {
    title: "Ventana",
    category: "photo",
    img: "/images/projects/photo_ventana.jpg",
    projectLink: "#",
    demoLink: "#",
    gitLink: "#",
  },
  {
    title: "Café Para Dos",
    category: "web",
    img: "/images/projects/web_cafeparados.jpg",
    projectLink: "#",
    demoLink: "#",
    gitLink: "#",
  },
  {
    title: "EcoVibe",
    category: "web",
    img: "/images/projects/web_EcoVibe.jpg",
    projectLink: "#",
    demoLink: "#",
    gitLink: "#",
  },
  {
    title: "Flight Simulator UI",
    category: "web",
    img: "/images/projects/web_flightSimulator.jpg",
    projectLink: "#",
    demoLink: "#",
    gitLink: "#",
  },
  {
    title: "Honda Motorsport",
    category: "web",
    img: "/images/projects/web_hondamotorsport.jpg",
    projectLink: "#",
    demoLink: "#",
    gitLink: "#",
  },
];
---


<article
  class="py-16 text-white px-26 h-full "
>


  <Title class="text-center mb-8" text="Mis proyectos hasta ahora" />

  <!-- Filtros -->
  <nav class="flex justify-center mx-auto font-medium mb-10 gap-26 px-12 pb-2 text-sm flex-wrap">
    <button
      class="filter-btn relative text-[#e9eeef] hover:text-white transition duration-200"
      data-filter="all"
    >
      Todos
      <span class="active-indicator absolute left-1/2 -bottom-2 -translate-x-1/2  h-0.5 bg-white opacity-0 transition-all"></span>
    </button>
    <button
      class="filter-btn relative text-[#e9eeef] hover:text-white transition duration-200"
      data-filter="web"
    >
      Diseños Web
      <span class="active-indicator absolute left-1/2 -bottom-2 -translate-x-1/2  h-0.5 bg-white opacity-0 transition-all"></span>
    </button>
    <button
      class="filter-btn relative text-[#e9eeef] hover:text-white transition duration-200"
      data-filter="app"
    >
      Aplicaciones Web
      <span class="active-indicator absolute left-1/2 -bottom-2 -translate-x-1/2  h-0.5 bg-white opacity-0 transition-all"></span>
    </button>
    <button
      class="filter-btn relative text-[#e9eeef] hover:text-white transition duration-200"
      data-filter="photo"
    >
      Fotografía
      <span class="active-indicator absolute left-1/2 -bottom-2 -translate-x-1/2  h-0.5 bg-white opacity-0 transition-all"></span>
    </button>
  </nav>


  <!-- Grid de proyectos estilo Pinterest -->
  <div class="">
    <div id="project-grid" class="columns-1 sm:columns-2 lg:columns-4 gap-4 space-y-4">
      {projects.map(({ title, category, img, projectLink, demoLink, gitLink }) => (
        <div
          class="project-item break-inside-avoid group relative h-full overflow-hidden rounded-2xl shadow-lg transition-all duration-500 animate-fade-in"
          data-category={category}
        >
          <!-- Imagen base -->
          <img
            src={img}
            alt={title}
            class="w-full object-cover transition-transform duration-300 group-hover:scale-105"
            style="height: auto; max-height: 420px;"
          />

          <!-- "Tapa" que se levanta -->
          <div
            class="absolute inset-0 bg-[#0b0b0b]/80 transform translate-y-full group-hover:translate-y-0 transition-transform duration-300 ease-in-out flex flex-col justify-center items-center p-4"
          >
            <!-- Título dentro de la tapa -->
            <h3 class="text-lg font-semibold mb-4">{title}</h3>

            <!-- Botones -->
            <div class="flex flex-col gap-3 font-medium">
                
                {category !== "photo" && (
                  <a
                  href={demoLink}
                  class="flex gap-2 px-4 py-2 bg-[#e9eeef] text-black text-center rounded-full text-sm hover:bg-[#ffffffaa] transition-colors duration-200"
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  <svg xmlns="http://www.w3.org/2000/svg"  class="h-5 w-5 " viewBox="0 0 24 24">
                    <path fill="#0b0b0b" d="M14 3v2h3.59l-9.83 9.83l1.41 1.41L19 6.41V10h2V3m-2 16H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7h-2z" />
                  </svg> Live Demo
                </a>
                <a
                  href={gitLink}
                  class="flex gap-2 px-4 py-2 bg-[#333333] text-white text-center rounded-full text-sm hover:bg-[#444444] transition-colors duration-200"
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 " viewBox="0 0 24 24">
                    <path fill="#E9EEEF" d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2" />
                  </svg> GitHub
                </a>
                )}

                <a
                href={projectLink}
                class="px-4 py-2 bg-[#daa032] text-[#0b0b0b] text-center rounded-full text-sm hover:bg-[#e0b044] transition-colors duration-200"
                target="_blank"
                rel="noopener noreferrer"
                >
                Ver Proyecto
                </a>
                
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</article>

<style>

.filter-btn{
  cursor: pointer;
}

.filter-btn.active {
  color: #e9eeef;
}

.filter-btn.active .active-indicator {
  opacity: 1;
  width: 52px; 
  background-color: #e9eeef;
  box-shadow:
    0 0 8px #e9eeef,
    0 -2px 12px #fff;
}

nav{
  border-bottom: 1px solid white ;
  width: fit-content;
}

@keyframes fade-in {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in {
  animation: fade-in 0.6s ease-out both;
}
</style>

<script>
const buttons = document.querySelectorAll(".filter-btn");

buttons.forEach((button) => {
  button.addEventListener("click", () => {
    // Evitar repetir si ya está activo
    if (button.classList.contains("active")) return;

    // Remover 'active' de todos los botones
    buttons.forEach((btn) => btn.classList.remove("active"));

    // Añadir 'active' al botón clicado
    button.classList.add("active");

    const filter = button.getAttribute("data-filter");
    const items = document.querySelectorAll(".project-item");

    items.forEach((item, i) => {
      const el = item as HTMLElement; // ✅ Cast a HTMLElement
      const category = el.getAttribute("data-category");

      if (filter === "all" || category === filter) {
        el.classList.remove("hidden");
        el.style.animationDelay = `${i * 0.05}s`;
        el.classList.remove("animate-fade-in");
        void el.offsetWidth; // Reflow for animation
        el.classList.add("animate-fade-in");
      } else {
        el.classList.add("hidden");
      }
    });
  });
});

// Inicializar estado activo
buttons[0].classList.add("active");

</script>