---
import Title from "../components/Title.astro";
import Paragraph from "../components/Text.astro";
import { t } from "../i18n";

const lang =
  Astro.request.headers.get("cookie")?.match(/preferredLang=([^;]+)/)?.[1] ||
  "es";
---

<div class="relative lg:flex items-center  py-10 lg:py-20 lg:min-h-100">
  <div class="max-w-200 text-white px-0">
    <div
      class="lg:bg-[#0B0B0B]/60 ps-6 pe-6 py-6 px-4 lg:ps-32 lg:pe-24 lg:py-10"
    >
      <Title text={t(lang, "pages.about.title")} />
      <Paragraph
        class="text-justify"
        text={t(lang, "pages.about.description")}
      />
    </div>
  </div>

  <div
    class="w-full flex justify-center mt-32 lg:mt-0 xs:relative about-visual"
  >
    <div
      class="neon-box border rounded-xs border-[#daa032] h-[250px] w-[190px] absolute z-2 -translate-x-12 -translate-y-8 lg:h-[400px] lg:w-[300px] lg:-translate-x-[100px] lg:-translate-y-[50px]"
    >
    </div>

    <div
      class="dark-box bg-[#0B0B0B]/60 h-[250px] w-[190px] absolute z-2 translate-x-12 lg:h-[400px] lg:w-[300px] lg:translate-x-[100px]"
    >
    </div>

    <img
      src="/images/aboutme.png"
      alt="Eloy Lozano retrato"
      class="photo-main shadow-lg max-h-62 object-cover z-10 translate-y-12 lg:max-h-100 lg:translate-y-12"
      loading="lazy"
    />
  </div>
</div>

<style>
  /* 1. Animación Neón (Mantenemos tu pulso y añadimos flotación) */
  @keyframes neonPulse {
    0%,
    100% {
      box-shadow:
        0 0 6px #daa032,
        0 0 30px #daa032,
        inset 0 0 12px #daa032;
    }
    50% {
      box-shadow:
        0 0 6px #daa032,
        0 0 15px #daa032,
        inset 0 0 12px #daa032;
    }
  }

  /* 2. Flotación sutil para cada elemento */
  /* El secreto es usar 'inherit' o valores relativos para no perder el translate-x de Tailwind */

  @keyframes floatNeon {
    0%,
    100% {
      transform: translate(var(--tw-translate-x), var(--tw-translate-y))
        rotate(0deg);
    }
    50% {
      transform: translate(
          calc(var(--tw-translate-x) - 10px),
          calc(var(--tw-translate-y) - 10px)
        )
        rotate(-1deg);
    }
  }

  @keyframes floatDark {
    0%,
    100% {
      transform: translate(var(--tw-translate-x), var(--tw-translate-y));
    }
    50% {
      transform: translate(
        calc(var(--tw-translate-x) + 10px),
        calc(var(--tw-translate-y) + 10px)
      );
    }
  }

  @keyframes floatPhoto {
    0%,
    100% {
      transform: translateY(var(--tw-translate-y));
    }
    50% {
      transform: translateY(calc(var(--tw-translate-y) + 15px));
    }
  }

  .neon-box {
    animation:
      neonPulse 3s ease-in-out infinite,
      floatNeon 6s ease-in-out infinite;
  }

  .dark-box {
    animation: floatDark 8s ease-in-out infinite;
  }

  .photo-main {
    animation: floatPhoto 7s ease-in-out infinite;
  }

  /* Evitar scroll horizontal por las animaciones */
  .about-visual {
    perspective: 1000px;
  }
</style>
